webpackJsonp([13,19],{1:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=t.apiDomain="http://localhost:8001/";t.loginUrl=a+"oauth/token",t.userUrl=a+"api/user",t.siteAddUrl=a+"api/site",t.siteIndexUrl=a+"api/site",t.siteShowUrl=a+"api/site",t.siteShowAll=a+"api/sites",t.typeAnalyseAddUrl=a+"api/type_analyse",t.typeAnalyseIndexUrl=a+"api/type_analyse",t.typeAnalyseShowUrl=a+"api/type_analyse",t.typeAnalyseDeleteUrl=a+"api/type_analyse",t.paramTypeAnalyseShowUrl=a+"api/type_analyse/parametre",t.paramsAnalyse=a+"api/parametre_analyse",t.puitAddUrl=a+"api/puit",t.puitIndexUrl=a+"api/puit",t.puitShowUrl=a+"api/puit",t.echantillonUrl=a+"api/echantillon",t.echantillonsUrl=a+"api/echantillons",t.echantillonAll=a+"api/echantillon",t.laboratoireUrl=a+"api/laboratoire",t.paramUrl=a+"api/parametre",t.resultUrl=a+"api/echantillon/result",t.usersUrl=a+"api/users",t.AnalyseUrl=a+"api/analyse/params",t.echantillonCreate=a+"api/echantillon/create",t.echantillonDelete=a+"api/echantillon/delete",t.getHeader=function(){var e=JSON.parse(localStorage.getItem("authUser")),t={Accept:"application/json",Authorization:"Bearer "+e.access_token};return t}},70:function(e,t,a){(function(e){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(1),s=a(6),r=i(s);t.default={data:function(){return{value:[],ok:!1,paramsSelected:[],parametresA:[],idPara:"",laboSelected:"",tab_params:[],users:[],echantillon:{id:null,description:"",idpuit:null,code:"",pfd_debut:"",pfd_fin:"",date_prelevement:"",couleur:"",structure:"",autre_info:""},detailEchantillon:{id:null,description:"",idpuit:null,code:"",pfd_debut:"",pfd_fin:"",date_prelevement:"",couleur:"",structure:"",autre_info:""},analyse:{id:null,type:"",appareillage:"",protocole:"",technique:"",description:"",labo:"",user:""},laboratoire:{id:null,nom:"",ville:"",lng:"",lat:""},error:{technique:!1,protocole:!1,appareillage:!1,autre_info:!1}}},computed:{},ready:function(){},attached:function(){},methods:{getAnalyse:function(){var e=this;this.$http.get(l.typeAnalyseAddUrl,{headers:(0,l.getHeader)()}).then(function(t){r.default.success("Connection au serveur établie"),e.typeAnalyses=t.body.analyse,console.log("params"),e.parametresA=t.body.analyse,console.log(e.parametresA)},function(t){e.sending=!1,r.default.error("Erreur  de chargement des analyses")})},getEchantillon:function(){var e=this;this.$http.get(l.echantillonUrl+"/"+this.echantillon.id).then(function(t){console.log("echantillon chargé!!"),e.echantillon=t.body},function(e){r.default.error("Impossible d'obtenir l'echantillon Sélectionné")})},getLaboratoire:function(){var e=this;this.$http.get(l.laboratoireUrl).then(function(t){console.log("laboratoires chargés!!"),console.log(t.body),e.laboratoire=t.body},function(e){r.default.error("Impossible d'obtenir les laboratoires")})},getUsers:function(){var e=this;this.$http.get(l.usersUrl).then(function(t){console.log("users chargés!!"),console.log(t.body),e.users=t.body},function(e){r.default.error("Impossible d'obtenir les utilisateurs")})},AddAnalyse:function(){var e=this;if(this.paramsSelected.length<3)r.default.error("Veillez choisir 3 parametres");else{var t=parseInt(this.paramsSelected[0].value)+parseInt(this.paramsSelected[1].value)+parseInt(this.paramsSelected[2].value);100==t?(this.paramsSelected[3]=this.laboSelected,this.paramsSelected[4]=this.echantillon.id,console.log(this.paramsSelected[3]),this.$http.post(l.AnalyseUrl,this.paramsSelected,{headers:(0,l.getHeader)()}).then(function(t){e.sending=!1,console.log(t),r.default.success("Analyse Réussie!!")},function(t){console.log(t),e.sending=!1,r.default.error("une erreur serveur c'est produit lors de l'anlyse de  l'echantillon")})):r.default.error("Attention La somme doit être égale à: 100 "),console.log(t)}},checkMe:function(t){this.exist(t.id,this.paramsSelected)?this.remove(this.paramsSelected,t):this.paramsSelected.length>=3?(r.default.error("Vous ne pouvez choisir plus de 3 parametres"),console.log(e("#param"+t.id).prop("checked",!1))):this.paramsSelected.push(t),console.log(this.paramsSelected)},exist:function(e,t){for(var a=!1,i=0;i<t.length;i++)t[i].id==e&&(a=!0);return a},remove:function(e,t){var a=e.indexOf(t);return a!==-1&&e.splice(a,1),e}},watch:{idPara:function(e){var t=this;this.ok=!0,this.paramsSelected=[],this.paramsSelected.splice(0,this.paramsSelected.length),console.log(this.paramsSelected),this.$http.get(l.paramsAnalyse+"/"+e).then(function(e){r.default.success("chargement en cours..."),console.log("paramètreAnalyse"+e.body),console.log(e.body),t.tab_params=e.body},function(e){r.default.error("Impossible de charger les paramètres")})}},mounted:function(){this.echantillon.id=this.$route.params.idech,console.log(this.echantillon.id),this.getAnalyse(),this.getEchantillon(),this.getLaboratoire()},components:{}}}).call(t,a(7))},147:function(e,t,a){t=e.exports=a(4)(),t.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",file:"Add.vue",sourceRoot:"webpack://"}])},173:function(e,t,a){var i=a(147);"string"==typeof i&&(i=[[e.id,i,""]]);a(5)(i,{});i.locals&&(e.exports=i.locals)},184:function(e,t,a){var i,l;a(173),i=a(70);var s=a(224);l=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(l=i=i.default),"function"==typeof l&&(l=l.options),l.render=s.render,l.staticRenderFns=s.staticRenderFns,e.exports=i},224:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fluid",staticStyle:{padding:"20px"}},[a("div",{},[a("div",{staticClass:"ui teal dividing header"},[a("i",{staticClass:"filter icon"}),e._v(" "),a("div",{staticClass:"content"},[e._v("\n               Echantillon "),a("div",{staticClass:"sub header"},[e._v("  Code: "),a("b",[a("u",[e._v(e._s(e.echantillon.code))])])]),e.sending?a("i",{staticClass:"spinner large loading icon",staticStyle:{position:"absolute",top:"10px",right:"10px"}}):e._e()])]),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"ui vertically divided grid"},[a("div",{staticClass:"two column row"},[a("div",{staticClass:"six wide column"},[a("h3",[e._v("Ajout resultat d'analyse")]),e._v(" "),a("form",{staticClass:"ui form"},[a("div",{staticClass:"field"},[a("label",[e._v("Choisir le type d'analyse")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.idPara,expression:"idPara"}],staticClass:"ui fluid search dropdown",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.idPara=t.target.multiple?a:a[0]}}},[a("option",{attrs:{disabled:"",value:""}},[e._v("Choisir 1")]),e._v(" "),e._l(e.parametresA,function(t){return a("option",[e._v(e._s(t.type))])})],2)]),e._v(" "),e.ok?a("div",{staticClass:"field"},[a("label",[e._v("Laboratoire d'analyse")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.laboSelected,expression:"laboSelected"}],staticClass:"ui fluid search dropdown",attrs:{name:"laboratoire"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.laboSelected=t.target.multiple?a:a[0]}}},e._l(e.laboratoire,function(t){return a("option",[e._v(e._s(t.nom))])}))]):e._e(),e._v(" "),a("hr")]),e._v(" "),a("h3",[e._v("Coisir les Paramètres d'analyse")]),e._v(" "),a("form",{staticClass:"ui form"},[a("div",{staticClass:"ui middle aligned divided list",staticStyle:{"max-height":"400px","overflow-y":"scroll"}},e._l(e.tab_params,function(t){return a("div",{staticClass:"ui feed"},[a("div",{staticClass:"event"},[e._m(0,!0),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"summary"},[a("div",{staticClass:"ui checkbox"},[a("input",{attrs:{id:"param"+t.id,type:"checkbox","id-param":t.id},on:{click:function(a){e.checkMe(t)}}}),e._v(" "),a("label",{attrs:{for:"param"+t.id}},[e._v(e._s(t.nom))])])])])])])})),a("hr")])]),e._v(" "),a("div",{staticClass:"column"},[e.sending?a("i",{staticClass:"spinner large loading icon",staticStyle:{position:"absolute",top:"10px",right:"10px"}}):e._e(),e._v(" "),a("h2",[e._v("les paramètres de la "+e._s(e.idPara))]),e._v(" "),a("table",{staticClass:"ui celled table"},[e._m(1),e._v(" "),a("tbody",e._l(e.paramsSelected,function(t){return a("tr",{staticClass:"ui form"},[a("td",[a("div",{staticClass:"ui ribbon label"},[e._v(e._s(t.id))])]),e._v(" "),a("td",[e._v(e._s(t.nom))]),e._v(" "),a("td",[a("div",{staticClass:"field",class:{error:e.parametre_nom_error}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"param.value"}],attrs:{type:"Number"},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}})])])])}))]),e._v(" "),a("button",{staticClass:"ui primary button",attrs:{type:"submit"},on:{click:function(t){t.preventDefault(),e.AddAnalyse(t)}}},[e._v("Terminer")])])])])])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"label"},[a("i",{staticClass:"setting icon"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("#")]),e._v(" "),a("th",[e._v("Parametre")]),e._v(" "),a("th",[e._v("valeur")])])])}]}}});
//# sourceMappingURL=13.7db8eca90f0c8fd0b26f.js.map